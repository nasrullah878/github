<!-- Add User Form -->
<div class="card">
  <h2>Add User</h2>
  <form id="userForm">
    <input type="text" id="name" placeholder="Enter name" required>
    <input type="email" id="email" placeholder="Enter email" required>
    <input type="text" id="address" placeholder="Enter address" required>
    <button type="submit">Add User</button>
  </form>
</div>

<!-- Users List -->
<div class="card">
  <h2>Users List</h2>
  <ul id="users"></ul>
</div>

<script>
const API_BASE = "http://YOUR_VM_PUBLIC_IP"; // replace with your VM IP

async function loadUsers() {
  const res = await fetch(`${API_BASE}/get_users.php`);
  const data = await res.json();
  const list = document.getElementById("users");
  list.innerHTML = "";
  data.forEach(user => {
    list.innerHTML += `<li>${user.name} (${user.email}) - ${user.address}</li>`;
  });
}

document.getElementById("userForm").addEventListener("submit", async (e) => {
  e.preventDefault();
  const name = document.getElementById("name").value;
  const email = document.getElementById("email").value;
  const address = document.getElementById("address").value;

  await fetch(`${API_BASE}/add_user.php`, {
    method: "POST",
    headers: { "Content-Type": "application/x-www-form-urlencoded" },
    body: `name=${encodeURIComponent(name)}&email=${encodeURIComponent(email)}&address=${encodeURIComponent(address)}`
  });

  document.getElementById("userForm").reset();
  loadUsers();
});

// Load users on page start
loadUsers();
</script>
